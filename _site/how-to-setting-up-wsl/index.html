<!doctype html><html lang="zh"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link rel="icon" type="image/icon" href="/assets/img/favicon.ico"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@500;700;900&display=swap" rel="stylesheet"><link rel="stylesheet" href="/css/style.css"><title>配置 wsl 开发环境</title></head><body><div id="root"><div class="post"><div class="post-article"><div class="post__info"><h1 class="post__title">配置 wsl 开发环境</h1><time class="post__date" datetime="2020-06-15T11:13:04.430Z">June 15, 2020</time></div><h2>介绍 WSL</h2><p>WSL 是 Windows Subsystem for Linux 的缩写，译为适用于Linux 的 windows 子系统。WSL 功能推出之前，在 Windows 上运行 Linux 需要将 Linux 发行版安装在虚拟机（比如 VMware、VirtualBox），使用此方法过程比较繁琐，容易出错，而且使用虚拟机运行 Llinux 个人觉得比较占用系统资源。现在使用 WSL ，只需要在微软商店安装相应的 Linux 发行版，就可以在本地环境中体验到 Linux 的所有功能。</p><p>当然如果你想体验 Linux 发行版的图形界面，WSL 是不支持的，这个时候还只有使用虚拟机或者安装 Linux 在本地磁盘两种方法了。</p><p>接下来我们就开始配置 Windows 终端 &amp; WSL 开发环境。</p><h2>设置 WSL</h2><h3>开启 WSL</h3><p>打开「<strong>控制面板</strong>」&gt;「<strong>程序</strong>」&gt;「<strong>启用或关闭 Windows 功能</strong>」，然后在「<strong>适用于 Linux 的 Windows 子系统</strong>」选项前面打勾。</p><p>小技巧：使用快捷键 <code>Win+s</code> 打开搜索功能，在搜索框中输入关键字 <strong>Windows 功能</strong>，可以快速打开「<strong>启用或关闭 Windows 功能</strong>」。</p><p><img src="https://i.loli.net/2020/06/15/IyZQHcswn9NEgDp.png" alt=""></p><h3>安装 Ubuntu</h3><p>在 <strong>微软商店</strong> 可以搜索到很多 Linux 发行版，我推荐 <a href="https://www.microsoft.com/zh-cn/p/ubuntu/9nblggh4msv6?activetab=pivot:overviewtab">Ubuntu</a>，因为它对新手会比较友好一点。当然你可以根据个人喜好选择 Debian，kail Linux 或者 SUSE Linux 等等 Linux 发行版。</p><p><img src="https://i.loli.net/2020/06/15/5FkfX7I1eaJNHhS.png" alt=""></p><p><strong>安装之前，需要确认设备是否满足安装要求</strong>。以 <a href="https://www.microsoft.com/zh-cn/p/ubuntu/9nblggh4msv6?activetab=pivot:overviewtab">Ubuntu</a> 为例：在微软商店搜索 Ubuntu，进入产品的安装界面，然后点击 「<strong>系统要求</strong>」，查看设备是否满足产品的系统要求。如果你的设备符合要求，就会显示 <strong>此产品应该可以在此设备上运行</strong> 的字眼。</p><p><img src="https://i.loli.net/2020/06/15/k3KxVfO7LCla1YH.png" alt=""></p><p>在你的 Windows 设备上依次打开「<strong>设置</strong>」&gt;「<strong>系统</strong>」&gt;「<strong>关于</strong>」，然后在「<strong>Windows 规格</strong>」 中会看到你的设备操作系统版本号。如果不符合 Ubuntu 产品系统要求的话，就得赶紧更新系统了。</p><p><img src="https://i.loli.net/2020/06/15/qPzDbKpvBLfruGQ.png" alt=""></p><h3>创建用户</h3><p>安装完成后，第一次启动 Ubuntu 会要求创建一个用户和登录密码，全部设置完成后即可运行。</p><p><img src="https://i.loli.net/2020/06/15/RxthJjHEiCvqZGF.png" alt=""></p><p>无论你想要什么，都可以参考 Ubuntu 的安装文档进行下载安装，比如 Ruby、NodeJs、Docker 或者 Python 等工具。现在还需要一个 Windows 终端，因为默认的 Ubuntu 终端界面有点粗糙，我推荐使用微软开发的 <a href="https://www.microsoft.com/zh-cn/p/windows-terminal/9n0dx20hk701?rtc=1&amp;activetab=pivot:overviewtab">Windows 终端</a>，下面是 <a href="https://docs.microsoft.com/zh-cn/windows/terminal/">Microsoft 文档</a> 关于它的解释。</p><blockquote><p>Windows 终端是一个面向命令行工具和 shell（如命令提示符、PowerShell 和适用于 Linux 的 Windows 子系统 (WSL)）用户的新式终端应用程序。 它的主要功能包括多个选项卡、窗格、Unicode 和 UTF-8 字符支持、GPU 加速文本呈现引擎，还可以用于创建你自己的主题并自定义文本、颜色、背景和快捷键绑定。</p><p><a href="https://www.hanselman.com/blog/WhatsTheDifferenceBetweenAConsoleATerminalAndAShell.aspx">控制台、终端和 shell 之间的区别？</a></p></blockquote><h2>安装 Windows 终端</h2><p>在 <strong><a href="https://www.microsoft.com/zh-cn/p/windows-terminal/9n0dx20hk701?rtc=1&amp;activetab=pivot:overviewtab">微软商店</a></strong> 安装 Windows 终端，同样需要查看产品的系统要求，在 <strong>安装 Ubuntu</strong> 小节中已经介绍过，这里不再赘述。</p><p>当 Ubuntu 安装成功后，Windows 终端将自动为你创建 Ubuntu 配置文件，并且可以在 <strong>Windows 终端的下拉菜单</strong> 中看到 Ubuntu 选项了。</p><p><img src="https://i.loli.net/2020/06/15/pJ2hNrlEXde7ATV.png" alt=""></p><h2>配置 Windows 终端</h2><p>通过点击 Windows 终端的下拉菜单「<strong>∨</strong>」&gt;「<strong>设置</strong>」或者直接使用快捷键 <code>ctrl+逗号</code> ，可以在默认的文本编辑器中打开配置文件 <code>setting.json</code> 。</p><p>我们可以通过修改配置文件在 Windows 终端上做很多的自定义设置。下面我们将进行全局设置、配色方案、快捷键绑定以及字体的修改。</p><p>我的终端配置效果图：</p><p><img src="https://i.loli.net/2020/06/22/TAYxb5aKUfDrWHw.png" alt="terminal"></p><h3>全局设置</h3><p><code>setting.json</code> 配置文件根目录下的属性将影响整个终端窗口，像 <code>defaultProfile</code>、<code>theme</code> 、<code>initialRows</code>、<code>initialCols</code>、<code>initialPosition</code>。</p><h4>默认配置文件</h4><p>属性 <code>defaultProfile</code> 表示打开 Windows 终端时，默认打开的命令行工具或者 shell。值为字符串形式的 GUID，默认值为 PowerShell 的 GUID。Windows 终端上的每一个命令行工具或者 shell 都有一个唯一的 GUID 值。我习惯将 Ubuntu 设置为默认打开的配置文件。</p><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token comment">// 设置 Ubuntu 的 GUID 为默认的配置文件</span></span><br><span class="highlight-line">defaultProfile<span class="token operator">:</span> <span class="token string">"{2c4de342-38b7-51cf-b940-2309a097f518}"</span></span></code></pre><h4>深色/浅色主题</h4><p>设置属性 <code>theme</code> ，修改 Windows 终端的主题颜色。值有三个，分别为：<code>&quot;system&quot;</code>、<code>&quot;dark&quot;</code>、<code>&quot;light&quot;</code>。<code>&quot;system&quot;</code> 表示跟随系统主题颜色。</p><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token property">"system"</span><span class="token operator">:</span> <span class="token string">"dark"</span></span></code></pre><h4>窗口大小</h4><p>属性 <code>initialCols</code> 设置首次启动时的列，属性 <code>initialRows</code> 设置首次启动时的行。</p><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token property">"initialCols"</span><span class="token operator">:</span> <span class="token string">"60"</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token property">"initialRows"</span><span class="token operator">:</span> <span class="token string">"20"</span></span></code></pre><h4>窗口位置</h4><p>属性 <code>initialPosition</code> 设置 Windows 终端在打开时窗口的位置。值为字符串形式的坐标值，比如：<code>&quot;200, 200&quot;</code>，表示 x 坐标为 200 ，y 坐标为 200。</p><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token property">"initialPosition"</span><span class="token operator">:</span> <span class="token string">"200, 200"</span></span></code></pre><h3>Windwos 终端中配置文件设置</h3><p>下面列出的设置特定于每个唯一的配置文件。这里的配置文件指的是：Windows 终端中的命令行工具或者 shell 程序的配置文件。如果希望将某个设置应用于所有配置文件，可以将其添加到 settings.json 文件中的配置文件列表上方的 <code>defaults</code> 部分。</p><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token property">"defaults"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token comment">// 设置应用于所有的配置文件</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token property">"list"</span><span class="token operator">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">    <span class="token comment">// 配置文件列表</span></span><br><span class="highlight-line"><span class="token punctuation">]</span></span></code></pre><h4>修改配色方案</h4><p>设置 Windows 终端中某一个命令行或者 shell 的配色方案，请在指定的位置添加 <code>colorScheme</code> 属性，并将配色方案的 <code>name</code> 作为值。</p><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token property">"colorScheme"</span><span class="token operator">:</span> <span class="token string">"配色方案主题的名字"</span></span></code></pre><p>Windows 终端内置了 Campbell、Campbell Powershell、Vintage、One Half Dark、One Half Light 等九种主题，你可以在官方文档 <a href="https://docs.microsoft.com/zh-cn/windows/terminal/customize-settings/color-schemes#tango-dark">Windows 终端中的配色方案</a> 中看到以上所有配色方案的样式。</p><p>以配置 Ubuntu 命令行配色方案为例：在 Ubuntu 配置信息中添加 <code>&quot;colorScheme&quot;：&quot;One Half Light&quot;</code> ，修改 <code>setting.json</code> 文件如下：</p><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">"guid"</span><span class="token operator">:</span> <span class="token string">"{2c4de342-38b7-51cf-b940-2309a097f518}"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"hidden"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Ubuntu"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"source"</span><span class="token operator">:</span> <span class="token string">"Windows.Terminal.Wsl"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"colorScheme"</span><span class="token operator">:</span> <span class="token string">"One Half Dark"</span> <span class="token comment">// 设置 One Half Light 主题为 Ubuntu 命令行配</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>Ubuntu 默认配色（左）和 One Half Dark 配色方案（右）的对比图：</p><p><img src="https://i.loli.net/2020/06/22/9SUoHBsEyOaeWfJ.png" alt="One Half Dark"></p><h4>修改 dircolors</h4><p><code>dircolors</code> 命令设置 <code>ls</code> 、<code>tree</code> 命令在显示目录或文件时所用的色彩。<code>dircolors</code> 还可根据色彩配置文件来设置 <code>LS_COLORS</code> 环境变量。</p><p>设置 <a href="https://www.gnu.org/software/coreutils/manual/html_node/dircolors-invocation.html#dircolors-invocation">dircolors</a> 主题为 <a href="https://www.nordtheme.com/ports/dircolors">Nord dircolors</a> 。Nord dircolors 是一个开源的 dircolors 主题，以冷色系颜色为主调，使用它会让你的终端看起来更加的优雅和整洁。以配置 Ubuntu 命令行 <code>dircolor</code> 主题为例：</p><p><img src="https://i.loli.net/2020/06/21/mWN51JTaVfpSwiK.png" alt="Nord dircolors 主题"></p><p><strong>快速开始</strong></p><ol><li><p>在 <a href="https://github.com/arcticicestudio/nord-dircolors">nord-dircolors</a> Github 仓库主页下载 <a href="https://github.com/arcticicestudio/nord-dircolors/blob/develop/src/dir_colors">dir_colors</a> 文件，重命名为 <code>.dir_colors</code> ，并将它移动到 <code>~</code>（使用 <code>cd</code> 命令改变当前目录为根目录）。</p></li><li><p>为了让 <code>dircolors</code> 命令读取到 <code>~/.die_colors</code> 文件，还需要将以下内容添加到 <code>~/.bashrc</code> 文件中。</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line"><span class="token builtin class-name">eval</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">dircolors</span> ~/.dir_colors<span class="token variable">)</span></span>"</span></span></code></pre></li><li><p>在终端运行以下命令即可生效：</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line"><span class="token builtin class-name">source</span> ~/.bashrc</span></code></pre><p>Nord dircolors 主题实际效果：</p><p><img src="https://i.loli.net/2020/06/22/5hliIakPVL9nzqJ.png" alt="dircolors"></p></li></ol><h3>字体</h3><p>微软提供了一种开源的字体 Cascadia Code ，该字体适用于终端应用程序和文本编辑器，比如 Windows 终端和 Visual Studio Code。</p><p>你可以在 <a href="https://github.com/microsoft/cascadia-code/releases">Cascadia Code Github 发布页</a> 下载到该字体的所有版本。Windows 终端在其包中提供 Cascadia Code 和 Cascadia Mono，并默认使用 Cascadia Mono。</p><p>如果需要修改终端的字体，请添加 <code>fontFace</code> 属性，并将字体的 <code>name</code> 作为属性值。如下：</p><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token property">"fontFace"</span><span class="token operator">:</span> <span class="token string">"字体名字"</span></span></code></pre><p>以配置 Ubuntu 命令行字体为例：下载 &amp; 安装 Google Fonts <a href="https://fonts.google.com/specimen/Roboto+Mono?query=roboto+mono">Roboto Mono</a> 粗体，设置 <code>Roboto Mono</code> 为 <code>fontFace</code> 属性值。修改配置文件如下：</p><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">"guid"</span><span class="token operator">:</span> <span class="token string">"{2c4de342-38b7-51cf-b940-2309a097f518}"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"hidden"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Ubuntu"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"source"</span><span class="token operator">:</span> <span class="token string">"Windows.Terminal.Wsl"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"fontFace"</span><span class="token operator">:</span> <span class="token string">"Roboto Mono"</span>      <span class="token comment">// 设置 Roboto Mono 字体</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><p>Roboto Mono 字体效果图：</p><p><img src="https://i.loli.net/2020/06/22/cYrb79aJx5QtZDn.png" alt="Roboto Mono"></p><h4>光标设置</h4><p>Windows 终端提供五种光标形状，分别是：<code>&quot;bar&quot;</code> ( ┃ )、<code>&quot;vintage&quot;</code> ( ▃ )、<code>&quot;underscore&quot;</code> ( ▁ )、<code>&quot;filledBox&quot;</code> ( █ )、<code>&quot;emptyBox&quot;</code> ( ▯ )。</p><p>修改光标形状，请添加 <code>cursorShape</code> 属性，选择一种光标形状，并将光标形状的名字作为属性值。以配置 Ubuntu 命令行光标形状为例：</p><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">"guid"</span><span class="token operator">:</span> <span class="token string">"{2c4de342-38b7-51cf-b940-2309a097f518}"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"hidden"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Ubuntu"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"source"</span><span class="token operator">:</span> <span class="token string">"Windows.Terminal.Wsl"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"cursorShape"</span><span class="token operator">:</span> <span class="token string">"filledBox"</span>      <span class="token comment">// 设置光标形状</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><h4>终端起始目录</h4><p>Windows 终端中的 WSL 默认的起始目录在 <code>/mnt/c/Users/用户名</code>。如果你想修改 Linux 的起始目录为主目录， 可以添加属性 <code>startingDirectory</code>，属性值设置为你的 WSL 主目录的网络路径。下面是我的配置文件修改：</p><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token comment">// WSL 为 Ubuntu</span></span><br><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">"guid"</span><span class="token operator">:</span> <span class="token string">"{2c4de342-38b7-51cf-b940-2309a097f518}"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"hidden"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Ubuntu"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"source"</span><span class="token operator">:</span> <span class="token string">"Windows.Terminal.Wsl"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"startingDirectory"</span><span class="token operator">:</span> <span class="token string">"//wsl$/Ubuntu/home/byo"</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token comment">// WSL 为 Ubuntu-18.04</span></span><br><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">"guid"</span><span class="token operator">:</span> <span class="token string">"{c6eaf9f4-32a7-5fdc-b5cf-066e8a4b1e40}"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"hidden"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Ubuntu-18.04"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token property">"source"</span><span class="token operator">:</span> <span class="token string">"Windows.Terminal.Wsl"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">	<span class="token property">"startingDirectory"</span><span class="token operator">:</span> <span class="token string">"//wsl$/Ubuntu-18.04/home/byo"</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><h2>修改终端提示符</h2><p>终端的提示符通过环境变量 <code>PS1</code>（Prompt String 1）设置。有许多的转移字符可以插入终端的提示符，比如：</p><ul><li><code>\u</code> ：用户名</li><li><code>\h</code>：短的主机名</li><li><code>\W</code>：当前工作目录的名字</li><li><code>\w</code>：当前工作目录的路径</li></ul><p>更多详细介绍请参考 <a href="https://www.tldp.org/HOWTO/Bash-Prompt-HOWTO/bash-prompt-escape-sequences.html">Bash Prompt Escape Sequences</a> 。</p><p>推荐一个可以自动生成 <code>PS1</code> 变量的网站 <a href="http://ezprompt.net/">EZPROMPT</a>。将生成的代码复制并且粘贴在 <code>~/.bashrc</code> 文件夹中，在终端运行以下命令即可生效。</p><pre class="language-shell"><code class="language-shell"><span class="highlight-line"><span class="token builtin class-name">source</span> ~/.bashrc</span></code></pre><p>下面是我的 Prompt 配置信息：</p><pre class="language-shell"><code class="language-shell"><span class="highlight-line"><span class="token comment"># get current branch in git repo</span></span><br><span class="highlight-line"><span class="token keyword">function</span> <span class="token function-name function">parse_git_branch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">	<span class="token assign-left variable">BRANCH</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">git</span> branch <span class="token operator"><span class="token file-descriptor important">2</span>></span> /dev/null <span class="token operator">|</span> <span class="token function">sed</span> -e <span class="token string">'/^[^*]/d'</span> -e <span class="token string">'s/* \(.*\)/<span class="token entity" title="\1">\1</span>/'</span><span class="token variable">`</span></span></span><br><span class="highlight-line">	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token string">"<span class="token variable">${BRANCH}</span>"</span> <span class="token operator">==</span> <span class="token string">""</span> <span class="token punctuation">]</span></span><br><span class="highlight-line">	<span class="token keyword">then</span></span><br><span class="highlight-line">		<span class="token assign-left variable">STAT</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span>parse_git_dirty<span class="token variable">`</span></span></span><br><span class="highlight-line">		<span class="token builtin class-name">echo</span> <span class="token string">"[<span class="token variable">${BRANCH}</span><span class="token variable">${STAT}</span>]"</span></span><br><span class="highlight-line">	<span class="token keyword">else</span></span><br><span class="highlight-line">		<span class="token builtin class-name">echo</span> <span class="token string">""</span></span><br><span class="highlight-line">	<span class="token keyword">fi</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment"># get current status of git repo</span></span><br><span class="highlight-line"><span class="token keyword">function</span> <span class="token function-name function">parse_git_dirty</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">	<span class="token assign-left variable">status</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">git</span> status <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">|</span> <span class="token function">tee</span><span class="token variable">`</span></span></span><br><span class="highlight-line">	<span class="token assign-left variable">dirty</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> -n <span class="token string">"<span class="token variable">${status}</span>"</span> <span class="token operator"><span class="token file-descriptor important">2</span>></span> /dev/null <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"modified:"</span> <span class="token operator">&amp;></span> /dev/null<span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$?</span>"</span><span class="token variable">`</span></span></span><br><span class="highlight-line">	<span class="token assign-left variable">untracked</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> -n <span class="token string">"<span class="token variable">${status}</span>"</span> <span class="token operator"><span class="token file-descriptor important">2</span>></span> /dev/null <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"Untracked files"</span> <span class="token operator">&amp;></span> /dev/null<span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$?</span>"</span><span class="token variable">`</span></span></span><br><span class="highlight-line">	<span class="token assign-left variable">ahead</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> -n <span class="token string">"<span class="token variable">${status}</span>"</span> <span class="token operator"><span class="token file-descriptor important">2</span>></span> /dev/null <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"Your branch is ahead of"</span> <span class="token operator">&amp;></span> /dev/null<span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$?</span>"</span><span class="token variable">`</span></span></span><br><span class="highlight-line">	<span class="token assign-left variable">newfile</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> -n <span class="token string">"<span class="token variable">${status}</span>"</span> <span class="token operator"><span class="token file-descriptor important">2</span>></span> /dev/null <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"new file:"</span> <span class="token operator">&amp;></span> /dev/null<span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$?</span>"</span><span class="token variable">`</span></span></span><br><span class="highlight-line">	<span class="token assign-left variable">renamed</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> -n <span class="token string">"<span class="token variable">${status}</span>"</span> <span class="token operator"><span class="token file-descriptor important">2</span>></span> /dev/null <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"renamed:"</span> <span class="token operator">&amp;></span> /dev/null<span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$?</span>"</span><span class="token variable">`</span></span></span><br><span class="highlight-line">	<span class="token assign-left variable">deleted</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> -n <span class="token string">"<span class="token variable">${status}</span>"</span> <span class="token operator"><span class="token file-descriptor important">2</span>></span> /dev/null <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"deleted:"</span> <span class="token operator">&amp;></span> /dev/null<span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$?</span>"</span><span class="token variable">`</span></span></span><br><span class="highlight-line">	<span class="token assign-left variable">bits</span><span class="token operator">=</span><span class="token string">''</span></span><br><span class="highlight-line">	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">${renamed}</span>"</span> <span class="token operator">==</span> <span class="token string">"0"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span></span><br><span class="highlight-line">		<span class="token assign-left variable">bits</span><span class="token operator">=</span><span class="token string">"><span class="token variable">${bits}</span>"</span></span><br><span class="highlight-line">	<span class="token keyword">fi</span></span><br><span class="highlight-line">	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">${ahead}</span>"</span> <span class="token operator">==</span> <span class="token string">"0"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span></span><br><span class="highlight-line">		<span class="token assign-left variable">bits</span><span class="token operator">=</span><span class="token string">"*<span class="token variable">${bits}</span>"</span></span><br><span class="highlight-line">	<span class="token keyword">fi</span></span><br><span class="highlight-line">	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">${newfile}</span>"</span> <span class="token operator">==</span> <span class="token string">"0"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span></span><br><span class="highlight-line">		<span class="token assign-left variable">bits</span><span class="token operator">=</span><span class="token string">"+<span class="token variable">${bits}</span>"</span></span><br><span class="highlight-line">	<span class="token keyword">fi</span></span><br><span class="highlight-line">	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">${untracked}</span>"</span> <span class="token operator">==</span> <span class="token string">"0"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span></span><br><span class="highlight-line">		<span class="token assign-left variable">bits</span><span class="token operator">=</span><span class="token string">"?<span class="token variable">${bits}</span>"</span></span><br><span class="highlight-line">	<span class="token keyword">fi</span></span><br><span class="highlight-line">	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">${deleted}</span>"</span> <span class="token operator">==</span> <span class="token string">"0"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span></span><br><span class="highlight-line">		<span class="token assign-left variable">bits</span><span class="token operator">=</span><span class="token string">"x<span class="token variable">${bits}</span>"</span></span><br><span class="highlight-line">	<span class="token keyword">fi</span></span><br><span class="highlight-line">	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">${dirty}</span>"</span> <span class="token operator">==</span> <span class="token string">"0"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span></span><br><span class="highlight-line">		<span class="token assign-left variable">bits</span><span class="token operator">=</span><span class="token string">"!<span class="token variable">${bits}</span>"</span></span><br><span class="highlight-line">	<span class="token keyword">fi</span></span><br><span class="highlight-line">	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token string">"<span class="token variable">${bits}</span>"</span> <span class="token operator">==</span> <span class="token string">""</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span></span><br><span class="highlight-line">		<span class="token builtin class-name">echo</span> <span class="token string">" <span class="token variable">${bits}</span>"</span></span><br><span class="highlight-line">	<span class="token keyword">else</span></span><br><span class="highlight-line">		<span class="token builtin class-name">echo</span> <span class="token string">""</span></span><br><span class="highlight-line">	<span class="token keyword">fi</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PS1</span></span><span class="token operator">=</span><span class="token string">"\u@ubuntu:\[<span class="token entity" title="\033">\033</span>[1;34m\]\w\[<span class="token entity" title="\033">\033</span>[0m\]\<span class="token variable"><span class="token variable">`</span>parse_git_branch<span class="token punctuation">\</span><span class="token variable">`</span></span>$ "</span></span></code></pre><p>效果如下：</p><p><img src="https://i.loli.net/2020/06/22/6hLJDAo9wVRFGKi.png" alt="prompt"></p><h2>快捷键介绍</h2><p>Windows 终端默认的快捷键配置在 <code>defaults.json</code> 文件中，可按住 <code>alt</code> 键并点击设置按钮来访问该文件。</p><ul><li><code>Ctrl+,</code> ：打开设置文件</li><li><code>Ctrl+shift+space</code> ：打开下拉菜单</li><li><code>alt+enter</code>：切换全屏</li><li><code>ctrl+shift+f</code>：查找内容</li><li><code>ctrl+shift+w</code>：关闭窗口</li><li><code>ctrl+shift+t</code>：新建选项卡</li><li><code>ctrl+tab</code>：切换选项卡</li><li><code>alt+shift+-</code>：垂直拆分窗格</li><li><code>alt+shift++</code>：水平拆分窗格</li><li><code>alt+方向键</code>：移动窗格焦点</li><li><code>alt+shift+方向键</code>：调整窗格大小</li><li><code>ctrl+shift+c</code>：复制内容到剪贴板</li><li><code>ctrl+shift+v</code>：粘贴剪贴板上复制的内容</li></ul><p>更多快捷键介绍请参考 <a href="https://docs.microsoft.com/zh-cn/windows/terminal/customize-settings/key-bindings">Windows 终端中的自定义键绑定</a>。</p><h2>其他</h2><p>在 Windows 文件管理器查看 WSL 网络路径。</p><ol><li>使用 <code>cd</code> 命令进入 <code>~</code> 目录</li><li>在终端运行以下命令</li></ol><pre class="language-bash"><code class="language-bash"><span class="highlight-line">explorer.exe <span class="token builtin class-name">.</span></span></code></pre><h2>资源</h2><ul><li><a href="https://www.cyberciti.biz/tips/howto-linux-unix-bash-shell-setup-prompt.html">How to Change / Set up bash custom prompt (PS1) in Linux</a></li><li><a href="https://wespeter.com/posts/how-to-set-windows-terminal-starting-directory/">How To Set Windows Terminal Starting Directory for WSL</a></li><li><a href="https://opensource.com/article/17/7/bash-prompt-tips-and-tricks">Bash prompt tips and tricks</a></li><li><a href="https://www.tldp.org/HOWTO/Bash-Prompt-HOWTO/bash-prompt-escape-sequences.html">Bash Prompt Escape Sequences</a></li><li><a href="https://docs.microsoft.com/zh-cn/windows/terminal/">Windows 终端文档</a></li><li><a href="http://tldp.org/HOWTO/Bash-Prompt-HOWTO/index.html">Bash Prompt HOWTO</a></li><li><a href="https://www.hanselman.com/blog/HowToMakeAPrettyPromptInWindowsTerminalWithPowerlineNerdFontsCascadiaCodeWSLAndOhmyposh.aspx">How to make a pretty prompt in Windows Terminal with Powerline, Nerd Fonts, Cascadia Code, WSL, and oh-my-posh</a></li><li><a href="https://docs.microsoft.com/zh-cn/windows/wsl/">适用于 Linux 的 Windows 子系统文档</a></li></ul></div></div></div><script src="/js/script.js"></script><script src="https://kit.fontawesome.com/d101a7035d.js" crossorigin="anonymous"></script></body></html>