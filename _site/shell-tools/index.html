<!doctype html><html lang="zh"><head><script>(function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer'
            ? '&l=' + l
            : '';
        j.async = true;
        j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f
          .parentNode
          .insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-N5BVZ6D');</script><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link href="https://fonts.googleapis.com/css?family=Noto+Sans+SC:300,400,500,700&display=swap&subset=chinese-simplified" rel="stylesheet"><link rel="icon" type="image/icon" href="/assets/img/favicon.ico"><link rel="stylesheet" href="/css/style.css"><title>命令行和 Shell 工具</title><script data-ad-client="ca-pub-8663822397755998" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div class="container"><nav class="nav"><div class="site-nav"><a href="/" class="site-nav__brand"><svg class="site-nav__logo"><use xlink:href="/assets/img/logo.svg#icon_logo"></use></svg> <span class="mobile-site-nav__info">byodian's blog</span></a><div class="navbar__menu"><ul class="nav__list"><li class="nav__item"><a href="/" class="nav__link">首页</a></li><li class="nav__item"><a href="/posts/" class="nav__link">文章</a></li><li class="nav__item"><a href="/projects/" class="nav__link">项目</a></li><li class="nav__item"><a class="nav__link" href="https://resource.netlify.com/">导航</a></li><li class="nav__item dropdown-container"><button class="btn nav__button">更多 <svg width="10" height="7" viewbox="0 0 26 14" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: 10px"><line x1="0.353553" y1="0.646447" x2="13.3536" y2="13.6464" stroke="black"/><line x1="12.6464" y1="13.6464" x2="25.6464" y2="0.646446" stroke="black"/></svg></button><div class="dropdown"><ul class="dropdown__list"><li class="dropdown__item"><a href="/tags/">标签</a></li><li class="dropdown__item"><a href="/about/">关于</a></li><li class="dropdown__item"><a href="/feed.xml">RSS</a></li></ul></div></li></ul></div></div></nav><main class="content"><div class="post"><div class="post-article"><section class="post__info"><h1 class="post__title">命令行和 Shell 工具</h1><time class="post__date" datetime="2020-12-21T13:56:51.053Z">December 21, 2020</time> <a href="/tags/shell/" class="stress stress--tag">shell</a></section><p>任务自动化是计算机设计的初衷，学习使用文本编辑、版本控制、文本处理等工具，可以极大的帮助我们减少重复操作，提高效率。</p><p>学习目的：</p><ul><li>学习使用别名</li><li>使用脚本构建系统，自动化执行重复任务</li></ul><h2>认识 Shell</h2><p>文字接口 Shell：允许执行程序，输入并获取某种半结构化的输出。</p><p>Bourne Again Shell，简称 bash，被最广泛使用的一种 Shell。</p><p>打开终端，会出现类似下面的提示符。</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">bashuser:~$ </span></code></pre><ul><li><code>bashuser</code> 表示主机名</li><li><code>~</code> 表示你当前所在的位置是 <code>home</code></li><li><code>$</code> 表示你的身份是普通用户（非 root 用户）</li></ul><h3>终端和 Shell区别</h3><p>[Todo]</p><h2>使用 Shell</h2><p><strong>执行步骤</strong></p><ol><li>Shell 基于空格分割命令并进行解析；</li><li>执行第一个单词代表的程序，后续单词作为参数传递给程序；</li></ol><p>也就是说，一个参数中如果存在空格会被当做多个参数处理，使用以下任意一种方式可实现在一个参数中使用空格：</p><ul><li>使用单引号包裹</li><li>使用双引号包裹</li><li>使用 <code>\</code> 转义</li></ul><pre class="language-bash"><code class="language-bash"><span class="highlight-line">bashuser~$ <span class="token builtin class-name">cd</span> my<span class="token punctuation">\</span> projects</span><br><span class="highlight-line">bashuser~/my projects$</span></code></pre><p>Shell 如何寻找 <code>date</code> 和 <code>echo</code> 等命令？</p><p>类似与 Python 或 Ruby，Shell 是一个编程环境，它具备变量、条件、循环或函数。</p><p>当执行命令时，实际上我们是在执行一段 shell 可以解释执行的简短代码。在 shell 中执行某条指令，它会咨询环境变量 <code>$PATH</code> ，并列出进行程序搜索的路径：</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">bashuser:~$ ehco <span class="token environment constant">$PATH</span></span><br><span class="highlight-line">/home/bashuser/.local/bin:/home/bashuser/.nvm/versions/node/v12.18.4/bin</span><br><span class="highlight-line">bashuser:~$ <span class="token function">which</span> <span class="token builtin class-name">echo</span></span><br><span class="highlight-line">/usr/bin/echo</span><br><span class="highlight-line">bashuser:~$ /bin/echo hello</span><br><span class="highlight-line">hello</span></code></pre><p>在 <code>$PATH</code> 中搜索由 <code>:</code> 所分割的一系列目录，基于名字搜索该程序，找到命令就可执行。</p><p>确定某个指令名所代表的程序，可以使用 <code>which</code> 命令。</p><h2>导航</h2><p>shell 中的路径是一组被分割的目录，在 Linux 系统中使用 <code>/</code> 分割，Windows 中用 <code>\</code> 分割。</p><p>绝对路径以 <code>/</code> 开头，相对路径是指相对于当前工作目录的路径。</p><h3>切换目录命令</h3><p><code>cd</code> change directory，传递路径参数，执行命令，可切换至相应的目录。</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">bashuser:~$ <span class="token builtin class-name">cd</span> projects</span><br><span class="highlight-line">bashuser:~/projects$ </span></code></pre><p>其中下面的字符作为参数：</p><ul><li><code>/</code> 表示系统的根目录</li><li><code>~</code> 表示 home 目录</li><li><code>.</code> 表示当前目录</li><li><code>..</code> 表示上一级目录</li><li><code>-</code> 上一次打开的目录</li></ul><h3>查看当前目录路径</h3><p><code>pwd</code> 查看当前目录路径</p><h3>列出当前目录下的文件</h3><p><code>ls</code> 列出当前目录下的文件，命令接受以 <code>-</code> 开头的标记和选项（带有值的标记）</p><p><code>-l</code> 打印文件属性（详细信息）</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">bashuser:~$ <span class="token function">ls</span> -l /projects</span><br><span class="highlight-line">drwx-xr-x <span class="token number">1</span> bashuser <span class="token function">users</span> <span class="token number">4096</span> Jul <span class="token number">26</span> <span class="token number">11</span>:51 alien_invasion</span></code></pre><p><code>drwx-xr--x</code> 代表文件的类型是权限</p><p>第一个字符代表文件是目录、文件或链接等，然后接下来九个字符，三个为一组，代表文件各自拥有者所具备的权限</p><ul><li><code>d</code> 代表文件是目录</li><li><code>rwx</code> 代表文件拥有者可具备<strong>读、写和执行</strong>权限</li><li><code>-xr</code> 代表用户组账号具<strong>写和执行</strong>权限。</li><li><code>--x</code> 代表非本人和没有加入本用户组的其他账号的权限，仅可执行。</li></ul><h2>配置 Shell 提示符</h2><p>显示各种有用的信息</p><h2>Shell 程序中的流概念</h2><p>在 Shell 中，程序有两个主要的流：输入流和输出流。</p><p>重定向 <code>&lt; file</code> 和 <code>&gt; file</code> ，将程序的输入输出流分别重定向到文件。</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">bashuser:~$ <span class="token builtin class-name">echo</span> hello <span class="token operator">></span> hello.txt</span><br><span class="highlight-line">bashuser:~$ <span class="token function">cat</span> hello.txt</span><br><span class="highlight-line">hello </span><br><span class="highlight-line">bashuser:~$ <span class="token function">cat</span> <span class="token operator">&lt;</span> hello.txt <span class="token operator">></span> hello2.txt</span><br><span class="highlight-line">bashuser:~$ <span class="token function">cat</span> hello2.txt</span><br><span class="highlight-line">hello</span></code></pre><p><code>&gt;&gt;</code> 向文件追加内容，使用管道，更好地利用文件的重定向。</p><p><code>|</code> 操作符允许我们将一个程序的输出作为下一个程序的输入。</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">bashuser:~$ <span class="token function">ls</span> -l projects <span class="token operator">|</span> <span class="token function">tail</span> -n1</span><br><span class="highlight-line">drwx-xr-x <span class="token number">1</span> bashuser <span class="token function">users</span> <span class="token number">4096</span> Jul <span class="token number">26</span> <span class="token number">11</span>:51 alien_invasion</span></code></pre><p>使用管道操作符，使 <code>ls -l projects</code> 的输出作为 <code>tail -n1</code> 的输入，结果将会在终端打印出 <code>ls -l projects</code> 输结果的最后一行。</p><h2>#!/bin/sh</h2><pre class="language-bash"><code class="language-bash"><span class="highlight-line"><span class="token shebang important">#!/bin/sh</span></span><br><span class="highlight-line"><span class="token function">curl</span> --head -<span class="token operator">=</span>silent https://missing.csail.mit.edu</span></code></pre><p><code>#</code> 在 Bash 代表注释，而 <code>!</code> 具有特殊的含义。</p><h2>常用命令</h2><ul><li><code>stat</code></li><li><code>tail</code></li><li><code>head</code></li><li><code>chomd</code></li><li><code>date</code> 打印当前的日期和时间</li><li><code>echo</code></li></ul><h2>任务</h2><p>写一段命令从 <code>/sys</code> 中获取笔记本的电量信息。</p></div></div></main><div id="disqus_thread"></div><script>/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
    /* var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
}; */
    (function () { // DON'T EDIT BELOW THIS LINE
      var d = document,
        s = d.createElement('script');
      s.src = 'https://byodian.disqus.com/embed.js';
      s.setAttribute('data-timestamp', + new Date());
      (d.head || d.body).appendChild(s);
    })();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script src="/js/script.js"></script><script src="https://kit.fontawesome.com/d101a7035d.js" crossorigin="anonymous"></script></body></html>