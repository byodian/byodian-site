<!doctype html><html lang="zh"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link href="https://fonts.googleapis.com/css?family=Noto+Sans+SC:300,400,500,700&display=swap&subset=chinese-simplified" rel="stylesheet"><link rel="icon" type="image/icon" href="/assets/img/favicon.ico"><link rel="stylesheet" href="/css/style.css"><title>嵌入式对象自适应布局方案</title></head><body><div class="container"><nav class="nav"><div class="site-nav"><a href="/" class="site-nav__brand"><svg class="site-nav__logo"><use xlink:href="/assets/img/logo.svg#icon_logo"></use></svg> </a><input type="checkbox" id="btn-menu" class="btn-menu"> <label for="btn-menu" class="btn-label"><span class="btn-span"></span></label><div class="site-nav__items"><a href="/" class="site-nav__link">Home</a> <a href="/projects/" class="site-nav__link">Projects</a> <a href="/posts/" class="site-nav__link">Articles</a> <a href="/bookmarks/" class="site-nav__link">Bookmarks</a> <a href="/about/" class="site-nav__link">About</a> <a href="/recommend/" class="site-nav__link">Recommend</a></div></div></nav><main class="content"><div class="post"><div class="post-article"><section class="post__info"><h1 class="post__title">嵌入式对象自适应布局方案</h1><time class="post__date" datetime="2019-09-08T05:57:01.273Z">September 8, 2019</time> <a href="/tags/CSS/" class="stress stress--tag">CSS</a></section><h3>具有固定宽高比的图片的可伸缩设计</h3><p>图片本身具有像素高度和宽度，且具有固定的宽高比，所以在响应式设计中给图片设置一个百分比数值宽度，高度设置为 auto , 这样图片就可以保持自适应。</p><pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../img/img.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line">img {</span><br><span class="highlight-line">  width: 100%;</span><br><span class="highlight-line">  height: auto;</span><br><span class="highlight-line">}</span></code></pre><p>但是， 图片的 width 设置为 100%，随着其容器尺寸的增大，它就会超出其固有的尺寸。这个问题可以通过将 max-width 设置为 100% 解决。</p><pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../img/img.png<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line">img {</span><br><span class="highlight-line">  max-width: 100%;</span><br><span class="highlight-line">  height: auto;</span><br><span class="highlight-line">}</span></code></pre><p>这里通过设置 max-width 属性为 100% 让元素变得可伸缩，同时又不会超出其固有大小。</p><h3>不具有固定宽高比容器的可伸缩性设计</h3><p>比如 iframe 和 object 元素，就没有固定的宽高比。</p><pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrapper-iframe<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>916<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>515<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://www.youtube.com/embed/SMi6p8SKHK4<span class="token punctuation">"</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">allowfullscreen</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"></span><br><span class="highlight-line">iframe {</span><br><span class="highlight-line">  width; 100%;</span><br><span class="highlight-line">  height: auto;</span><br><span class="highlight-line">}</span></code></pre><p>由于 iframe 没有固定的宽高比，在 iframe 元素上设置 width 为 100%, height 为 auto，将不会达到高度自适应的效果。</p><p>要解决这个问题，需要使用一些 CSS 技术，首先在 iframe 上包裹一个容器元素：</p><pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>resp-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>resp-iframe<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>916<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>515<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://www.youtube.com/embed/SMi6p8SKHK4<span class="token punctuation">"</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span></code></pre><p>设置容器元素 CSS 代码如下：</p><pre class="language-css"><code class="language-css"><span class="highlight-line"><span class="token selector">.resp-container</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  // 宽度默认为父元素的 100%</span><br><span class="highlight-line">  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">padding-top</span><span class="token punctuation">:</span> 56.25%<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><ul><li><code>position: relative</code> 可以作为子元素 iframe 定位的参考，因为在 CSS 中，设置为 <code>position: absolute</code> 的元素相对于它最近的 position 不为 static 的祖先元素来定位；</li><li><code>overflow:hidden</code> 隐藏溢出到容器外面的部分；</li><li><code>padding-top</code> 使用百分比数值设置 padding 可以确保容器有一个正确的宽高比，因为使用百分比数值设置 padding 其实际值基于包含块的宽度计算。此时，容器的宽度等于包含块的宽度，所以 padding-top 值实际值等于容器宽度的 56.25%。</li></ul><p>设置 iframe 元素 CSS 代码如下：</p><pre class="language-css"><code class="language-css"><span class="highlight-line"><span class="token selector">.resp-iframe</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><ul><li><code>position: absolute</code> iframe 相对于 <code>position: relative</code> 的容器定位</li><li><code>top: 0</code> 和 <code>left: 0</code>: 将 iframe 定位到容器的中心</li><li><code>width: 100%</code> 和 <code>height: 100%</code>: iframe 的宽高等于容器的宽高，填满了整个容器。</li></ul><p>这里有一种情况需要注意，如果不想使 iframe 包装容器的宽度为 100%，我们就的修改 padding-top 的值来确保容器的宽高比不变。但是我们不需要这么做，只要在容器的外面在添加一个包装元素，去设置最外面包装元素的宽度，即可实现灵活布局。</p><p>HTML 代码：</p><pre class="language-html"><code class="language-html"><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrapper<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>resp-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>resp-iframe<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>916<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>515<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://www.youtube.com/embed/SMi6p8SKHK4<span class="token punctuation">"</span></span> <span class="token attr-name">frameborder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">></span></span></span><br><span class="highlight-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span><br><span class="highlight-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></span></code></pre><p>CSS 代码：</p><pre class="language-css"><code class="language-css"><span class="highlight-line"><span class="token selector">.wrapper</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">width</span><span class="token punctuation">:</span> 85%<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.resp-container</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  // 宽度默认为父元素的 100%</span><br><span class="highlight-line">  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">padding-top</span><span class="token punctuation">:</span> 56.25%<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token selector">.resp-iframe</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre><h2>object-fit 属性</h2><p>[TODO]</p><h2>参考</h2><ul><li><a href="https://blog.theodo.com/2018/01/responsive-iframes-css-trick/">Responsive Iframes with One Great CSS Trick</a></li></ul></div></div></main></div><script src="/js/script.js"></script></body></html>