<!doctype html><html lang="zh"><head><script>(function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer'
            ? '&l=' + l
            : '';
        j.async = true;
        j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f
          .parentNode
          .insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-N5BVZ6D');</script><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link href="https://fonts.googleapis.com/css?family=Noto+Sans+SC:300,400,500,700&display=swap&subset=chinese-simplified" rel="stylesheet"><link rel="icon" type="image/icon" href="/assets/img/favicon.ico"><link rel="stylesheet" href="/css/style.css"><title>shell 脚本</title><script data-ad-client="ca-pub-8663822397755998" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div class="container"><nav class="nav"><div class="site-nav"><a href="/" class="site-nav__brand"><svg class="site-nav__logo"><use xlink:href="/assets/img/logo.svg#icon_logo"></use></svg> <span class="mobile-site-nav__info">byodian's blog</span></a><div class="navbar__menu"><ul class="nav__list"><li class="nav__item"><a href="/" class="nav__link">首页</a></li><li class="nav__item"><a href="/posts/" class="nav__link">文章</a></li><li class="nav__item"><a href="/projects/" class="nav__link">项目</a></li><li class="nav__item"><a class="nav__link" href="https://resource.netlify.com/">导航</a></li><li class="nav__item dropdown-container"><button class="btn nav__button">更多 <svg width="10" height="7" viewbox="0 0 26 14" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: 10px"><line x1="0.353553" y1="0.646447" x2="13.3536" y2="13.6464" stroke="black"/><line x1="12.6464" y1="13.6464" x2="25.6464" y2="0.646446" stroke="black"/></svg></button><div class="dropdown"><ul class="dropdown__list"><li class="dropdown__item"><a href="/tags/">标签</a></li><li class="dropdown__item"><a href="/about/">关于</a></li><li class="dropdown__item"><a href="/feed.xml">RSS</a></li></ul></div></li></ul></div></div></nav><main class="content"><div class="post"><div class="post-article"><section class="post__info"><h1 class="post__title">shell 脚本</h1><time class="post__date" datetime="2020-12-23T13:58:27.362Z">December 23, 2020</time> <a href="/tags/shell/" class="stress stress--tag">shell</a></section><h2>赋值</h2><p>赋值语法 <code>foo=bar</code>，访问变量中存储的数值，其语法为 <code>$foo</code> 。使用空格分隔赋值语句，导致不能正常工作。在 Shell 脚本中使用空格会起到分割参数的作用。</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line"><span class="token comment"># 此语句不能正常工作</span></span><br><span class="highlight-line">foo <span class="token operator">=</span> bar</span></code></pre><p>Bash 中的字符串通过 <code>'</code> 和 <code>''</code> 分隔符来定义。但含义却不同，</p><ul><li><code>'</code> 定义的字符串是原义字符串，其中的变量不会被转义。</li><li><code>''</code> 定义的字符串会就变量值进行替换。</li></ul><pre class="language-bash"><code class="language-bash"><span class="highlight-line"><span class="token assign-left variable">foo</span><span class="token operator">=</span>bar</span><br><span class="highlight-line"><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$foo</span>"</span></span><br><span class="highlight-line"><span class="token comment"># 打印 bar</span></span><br><span class="highlight-line"><span class="token builtin class-name">echo</span> <span class="token string">'<span class="token variable">$foo</span>'</span></span><br><span class="highlight-line"><span class="token comment"># 打印 $foo</span></span></code></pre><h2>参数</h2><p>bash 使用了很多特殊变量表示参数、错误代码和相关变量。</p><ul><li><code>$0</code> 脚本名</li><li><code>$1~$9</code> $1代表第1个参数，一次类推。</li><li><code>$@</code> 所有参数</li><li><code>$#</code> 参数个数</li><li><code>$?</code> 前一个命令到返回值</li><li><code>$$</code> 当前脚本进程识别码</li><li><code>!!</code> 上一条命令</li><li><code>$_</code> 上一条命令的最后一个参数</li><li><code>STDOUT</code> 返回输出值</li><li><code>STDERR</code> 返回错误及错误码</li></ul><h2>操作符</h2><p><code>&amp;&amp;</code> 和 <code>||</code></p><ul><li>同一行的多个命令可以用 <code>;</code> 分隔</li><li>程序 <code>true</code> 返回码永远是 <code>0</code></li><li>程序 <code>false</code> 返回码永远是 <code>1</code></li></ul><h2>命令替换</h2><p>以变量的形式获取一个命令的输出</p><p><code>$( CMD )</code> 执行 <code>CMD</code> 命令，输出结果会替换掉 <code>$( CMD )</code></p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">bashuser~$ <span class="token builtin class-name">echo</span> <span class="token string">"We are in <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>"</span></span><br><span class="highlight-line">We are <span class="token keyword">in</span> /home/bashuser</span></code></pre><h2>进程替换</h2><p><code>&lt;( CMD )</code> 会执行 <code>CMD</code> 并将结果输出到一个临时文件中，并将 <code>&lt;( CMD )</code> 替换成临时文件名。</p><p>返回值会通过文件而不是 STDIN。</p><p>显示文件夹 <code>foo</code> 和 <code>bar</code> 中文件的区别。</p><pre class="language-bash"><code class="language-bash"><span class="highlight-line">bashuser~$ <span class="token function">diff</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token function">ls</span> foo<span class="token punctuation">)</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token function">ls</span> bar<span class="token punctuation">)</span></span></code></pre><h2>通配符</h2><ul><li><code>?</code></li><li><code>*</code></li><li><code>{}</code></li></ul></div></div></main><div id="disqus_thread"></div><script>/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
    /* var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
}; */
    (function () { // DON'T EDIT BELOW THIS LINE
      var d = document,
        s = d.createElement('script');
      s.src = 'https://byodian.disqus.com/embed.js';
      s.setAttribute('data-timestamp', + new Date());
      (d.head || d.body).appendChild(s);
    })();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script src="/js/script.js"></script><script src="https://kit.fontawesome.com/d101a7035d.js" crossorigin="anonymous"></script></body></html>